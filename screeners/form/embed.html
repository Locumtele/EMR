<iframe 
    id="formFrame"
    src="https://locumtele.github.io/EMR/screeners/form/form.html?screener=GLP1"
    width="100%" 
    height="2000" 
    frameborder="0"
    style="border: none;">
</iframe>

<script>
    // Get screener from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const screener = urlParams.get('screener') || 'GLP1';
    const iframe = document.getElementById('formFrame');
    iframe.src = `https://locumtele.github.io/EMR/screeners/form/form.html?screener=${screener}`;

    // Listen for height messages from the iframe
    window.addEventListener('message', function(event) {
        // Verify origin for security
        if (event.origin !== 'https://locumtele.github.io') {
            return;
        }

        // Update iframe height when form sends height
        if (event.data && event.data.type === 'resize') {
            iframe.style.height = event.data.height + 'px';
        }

        // Forward GHL redirect events
        if (event.data && event.data.type === 'ghlRedirect') {
            const customEvent = new CustomEvent('ghlRedirect', {
                detail: event.data.detail
            });
            window.dispatchEvent(customEvent);
        }
    });
</script>